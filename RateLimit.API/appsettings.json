{
  "IpRateLimitPolicies": {
    "IpRules": [
      {
        "Ip": "::1",
        "Rules": [
          {
            "Endpoint": "*",
            "Period": "30s", //s saniye m dakika d güne denk gelir
            "Limit": 30 //30 saniyede bir  30 istek yapar
          }
        ]
      }
    ]
  },


  //https://github.com/stefanprodan/AspNetCoreRateLimit/wiki/IpRateLimitMiddleware#setup
  //ratelimiting kısmını githupdan aldık
  "IpRateLimiting": {
    "QuotaExceededResponse": "{{\"mesaj\":\"istek limit aşıldı.\",\"Detay\":\"İzin verilen istek sayısı {1} de {0} istektir {2} sonra tekrar deneyiniz \"}}"

  },
  "EnableEndpointRateLimiting": true,
  "EndpointWitheList": [ "put:/api/product" ],

  "StackBlockedRequests": false,
  "HttpStatusCode": 429, //çok fazla request yaptın
  "ClientIdHeader": "X-ClientId",
  "ClientWhitelist": [ "client-1" ],
  "GeneralRules": [
    {
      "Endpoint": "*:/api/product",
      "Period": "5s", //s saniye m dakika d güne denk gelir
      "Limit": 2 //5 saniyede bir  2 istek yapar
    },
    {
      "Endpoint": "*:/api/product",
      "Period": "1h", //s saniye m dakika d güne h saate denk gelir
      "Limit": 100 //1 saatde   100 istek yapar
    },

    {
      "Endpoint": "*/api/product/*",
      "Period": "30s",
      "Limit": 5
    },
    {
      "Endpoint": "*:/api/categories",
      "Period": "30s", //s saniye m dakika d güne h saate denk gelir
      "Limit": 5 //30 saniyede   5 istek yapar
    },
    {
      "Endpoint": "*:/api/categories",
      "Period": "1d", //s saniye m dakika d güne h saate denk gelir
      "Limit": 500 //1 dakikada   500 istek yapar
    }
  ]

},

  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Information"
    }
  },
  "AllowedHosts": "*"
}
